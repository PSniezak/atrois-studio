function formatTime(e){var i=Math.floor(e/60);return e=(e=Math.floor(e%60))>=10?e:"0"+e,(i=i)+":"+e}$(document).ready(function(){if($("#loader .container svg").fadeIn(),$(".languages").on("click",function(e){e.stopPropagation(),e.preventDefault();var i=window.location.hash.substr(1),t=$(this).attr("href")+"#"+i;if($(".slick-slider.active").length>0){var o=$(".unique-slider.active").attr("id");sessionStorage.setItem("project",o)}$(location).attr("href",t)}),$(".project-cover").Lazy(),!d){var e=parseInt($("#additional .logo").offset().top)-120;$(".year-section:first-child").css("margin-top",e+"px")}var i,t,o,n,a,s=["accueil","projets","à-propos","contact","presse","store"],r=[0],d=!1,c=!1,l=window.location.pathname;if(window.innerWidth<768&&($("html").addClass("mobile"),d=!0),"/jp"==l){v=$("#header-desktop .container .middle li:last").offset().left;$("#additional .social").css("left",v-18)}else{var v=$("#header-desktop .container .middle li:last").offset().left;$("#additional .social").css("left",v-51)}$("#fullpage").fullpage({scrollBar:!1,autoScrolling:!0,menu:"#menu-desktop, #menu-mobile",normalScrollElements:".normal-scroll",normalScrollElementTouchThreshold:10,scrollOverflow:!0,animateAnchor:!1,keyboardScrolling:!1,fixedElements:"#header-desktop, #header-mobile, #additional, #additional-mobile, .year-fixed",onLeave:function(e,o,n){2==o&&($(".fp-scroller, .iScrollIndicator").css("transform","translate(0px, 0px)"),$(".fp-section").find(".fp-scrollable").data("iscrollInstance").y=0),1==e&&"down"==n?($("#additional .social").fadeIn(),i=setTimeout(function(){$("#additional .gradient-reverse, #additional-mobile .gradient-reverse").fadeIn(),$("#header-desktop .container, #header-mobile .container").addClass("gradient")},650)):1==o&&"up"==n&&(clearTimeout(i),$("#additional .social").fadeOut(),$("#additional .gradient-reverse, #additional-mobile .gradient-reverse").fadeOut(),$("#header-desktop .container, #header-mobile .container").removeClass("gradient")),"up"==n?($("nav li[data-menuanchor='"+s[o-1]+"']").find(".highliner").css({right:0,left:"auto"}),$("nav li[data-menuanchor='"+s[o-1]+"']").find(".highliner").animate({width:"100%"},200),$("nav li.active").find(".highliner").css({left:0,right:"auto"}),$("nav li.active").find(".highliner").animate({width:"0%"},200)):($("nav li[data-menuanchor='"+s[o-1]+"']").find(".highliner").css({left:0,right:"auto"}),$("nav li[data-menuanchor='"+s[o-1]+"']").find(".highliner").animate({width:"100%"},200),$("nav li.active").find(".highliner").css({right:0,left:"auto"}),$("nav li.active").find(".highliner").animate({width:"0%"},200)),2==e&&($(".year-fixed").stop().hide(),$(".year").stop().fadeOut(),$(".cover").hide(),clearTimeout(t)),5==o&&d&&$("#section-press .left ul").scrollTop(0)},afterLoad:function(e,i){2==i&&($(".year-fixed").fadeIn(),t=setInterval(function(){for(var e=$("#section-projects .container").offset().top-$("#section-projects").offset().top,i=o-e,t=0;t<r.length;t++){var a;i+50>r[t]&&(a=t)}$(".year").each(function(){$(this).data("year")>=n-a&&$(this).data("year")!=n?$(this).fadeOut(100):$(this).fadeIn("fast")}),$(".year-fixed span").html(n-a)},100))},afterRender:function(){var e=$("#section-press").height(),i=$("#section-press .container .columns").offset().top-$("#section-press").offset().top,t=e-i;$("#section-press .container .columns, #section-press .container .columns ul, #section-press .container .columns .left").height(t),$("#section-press .container .columns, #section-press .container .columns ul, #section-press .container .columns .left").css("max-height",t+"px"),d&&$("#section-press .container").height(e-i-20);var a=$(".year-section").offset().left;o=$("#section-projects .container").offset().top-$("#section-projects").offset().top,d?$(".year-fixed").css("left","5%"):$(".year-fixed").css("left",a-58),$(".year-fixed").css("margin-top",o-32),$(".year-section").each(function(e){r.push($(this).height())});for(var s=1;s<r.length;s++)r[s]+=r[s-1];n=$(".year-fixed span").html()}}),$("#header-mobile .logo a").on("click",function(){c=!1,$(".hamb-menu").removeClass("is-clicked"),$("#menu-container-mobile .container, #menu-container-mobile .copyright").fadeOut("fast",function(){$("#menu-container-mobile").hide("slide",{direction:"down"},500),$(".slick-slider.active").length>0&&(setTimeout(function(){$("#additional, #header-desktop, #header-mobile").removeClass("blending")},500),$("#projects-sliders").fadeOut("fast",function(){$(".slick-slider.active video").trigger("pause"),$(".slick-slider.active").hide().removeClass("active")}))})}),$("nav li a").on("click",function(){d?($(".slick-slider.active").length>0&&(setTimeout(function(){$("#header-desktop .container, #header-mobile .container").addClass("gradient"),$("#additional, #header-desktop, #header-mobile").removeClass("blending")},500),$("#projects-sliders").fadeOut("fast",function(){$(".slick-slider.active video").trigger("pause"),$(".slick-slider.active").hide().removeClass("active")})),c=!1,$(".hamb-menu").removeClass("is-clicked"),$("#menu-container-mobile .container, #menu-container-mobile .copyright").fadeOut("fast",function(){$("#menu-container-mobile").hide("slide",{direction:"down"},500),$(".mobile-close-button").hide()})):($(".slick-slider.active").length>0&&(showAdditionnal(),setTimeout(function(){$("#header-desktop .container, #header-mobile .container").addClass("gradient"),$("#additional, #header-desktop, #header-mobile").removeClass("blending")},500),$("#projects-sliders").fadeOut("fast",function(){$(".slick-slider.active video").trigger("pause"),$(".slick-slider.active").hide().removeClass("active")})),$(this).next().css("width","100%"))}),$("nav li").hover(function(){$(this).find(".highliner").animate({width:"100%"},200)},function(){$(this).hasClass("active")||$(this).find(".highliner").animate({width:"0%"},200)}),$(".hamb-menu").on("click",function(){c?(c=!1,$(this).removeClass("is-clicked"),$(".slick-slider.active").length>0&&$("#header-mobile").addClass("blending"),$("#menu-container-mobile .container, #menu-container-mobile .copyright").fadeOut("fast",function(){$("#menu-container-mobile").hide("slide",{direction:"down"},500),$(".slick-slider.active").length>0&&$(".mobile-close-button").show()})):($(".slick-slider.active").length>0&&$("#header-mobile").removeClass("blending"),c=!0,$(this).addClass("is-clicked"),$("#menu-container-mobile").show("slide",{direction:"down"},500,function(){$("#menu-container-mobile .container, #menu-container-mobile .copyright").fadeIn(),$(".mobile-close-button").hide()}))}),$("#section-home .arrow-down a").on("click",function(){$.fn.fullpage.moveSectionDown()}),d?($("#section-home .background-slider").hide(),$("#section-home .background-slider-mobile").show(),$("#section-home .background-slider-mobile").slick({slidesToShow:1,autoplay:!1,autoplaySpeed:2600,speed:700,infinite:!0,fade:!0,arrows:!1,swipe:!1,pauseOnFocus:!1,pauseOnHover:!1})):($("#section-home .background-slider").slick({slidesToShow:1,autoplay:!1,autoplaySpeed:2600,speed:700,infinite:!0,fade:!0,arrows:!1,swipe:!1,pauseOnFocus:!1,pauseOnHover:!1}),$("#section-home .background-slider video").length>0&&$("#section-home .background-slider video").get(0).play()),$(".covers-container .cover").each(function(e){var i=parseInt(Math.floor(Math.random()*($(window).height()-120-$(this).find("img").height()-120+1)+120)-120),t=parseInt(Math.floor(Math.random()*($(window).width()-$(this).find("img").width()-60+1)+60));$(this).find("img").css("top",i+"px"),$(this).find("img").css("left",t+"px"),$(this).css("display","none"),$(this).css("visibility","visible")}),$(".project-link").hover(function(){if(!d){var e=$(this).data("name");$('.cover[data-name="'+e+'"]').length>0&&$('.cover[data-name="'+e+'"]').show()}},function(){if(!d){var e=$(this).data("name");$('.cover[data-name="'+e+'"]').length>0&&$('.cover[data-name="'+e+'"]').hide()}}),$(".project-link, .background-slide").on("click",function(){var e=$(this).data("id");$(this).data("name");if($("#"+e+" .slide").length>2)$("#"+e).slick("slickGoTo",0,!1),$("#"+e).addClass("active").show(),$("#additional, #header-mobile, #header-desktop").addClass("blending"),d?$(".mobile-close-button").show():hideAdditionnal(),$("#header-desktop .container, #header-mobile .container").removeClass("gradient"),$("#projects-sliders").show("slide",{direction:"down"},500),$(".slick-slider.active .slick-current video").length>0&&($(".slick-slider.active .slick-current video").get(0).play(),$(".slick-slider.active .slick-current video").on("timeupdate",function(){var e=$(".slick-slider.active .slick-current"),i=$(".slick-slider.active .slick-current video");if(i[0]){e.find(".video-current").text(formatTime(i[0].currentTime)),e.find(".video-duration").text(formatTime(i[0].duration));var t=i[0].currentTime/i[0].duration;e.find(".video-progress").width(100*t+"%")}}));else{if(d)i="/projects/media_mobile/"+e+"/all";else var i="/projects/media/"+e+"/all";$.ajax({url:i,context:document.body}).done(function(i){if(i.medias.length>0){var t="";if(d)for(var o in i.medias)i.medias[o].media?t+='<div class="slide"><div class="left-cover"></div><div class="right-cover"></div><div class="center-cover"></div><div class="overflower background-image-container" data-src="/uploads/projects/'+i.medias[o].project_id+"/"+i.medias[o].media+'"></div></div>':t+='<div class="slide"><div class="left-cover"></div><div class="right-cover"></div><div class="custom-controls"> <div class="play-pause pause">Pause</div> <div class="video-scrubber-container"><div class="video-scrubber"> <div class="video-progress"></div> </div></div> <div class="video-timer"><span class="video-current">00:00</span><span>/</span><span class="video-duration">00:00</span></div> </div><div class="overflower overflower-video"><video no-controls><source src="/uploads/projects/'+i.medias[o].project_id+"/"+i.medias[o].video+'"></video></div></div>';else for(var o in i.medias)i.medias[o].media?t+='<div class="slide"><div class="left-cover"></div><div class="right-cover"></div><div class="center-cover"></div><div class="overflower background-image-container" style="background-image: url(\'/uploads/projects/'+i.medias[o].project_id+"/"+i.medias[o].media+"');\"></div></div>":t+='<div class="slide"><div class="left-cover"></div><div class="right-cover"></div><div class="custom-controls"> <div class="play-pause pause">Pause</div> <div class="video-scrubber-container"><div class="video-scrubber"> <div class="video-progress"></div> </div></div> <div class="video-timer"><span class="video-current">00:00</span><span>/</span><span class="video-duration">00:00</span></div> </div><div class="overflower overflower-video"><video no-controls><source src="/uploads/projects/'+i.medias[o].project_id+"/"+i.medias[o].video+'"></video></div></div>';$("#projects-sliders #"+e).append(t).show(),$(".background-image-container").Lazy(),a=$(".background-image-container").data("plugin_lazy"),d?($("#"+e).on("init",function(){$("#projects-sliders").show("slide",{direction:"down"},500),a.loadAll(),a.update()}),$("#"+e).on("afterChange",function(e,i,t,o){a.force($(".slick-current .background-image-container")),a.update()}),$("#"+e).slick({arrows:!1,fade:!0})):($("#projects-sliders").imagesLoaded(function(){$("#"+e).slick({arrows:!1,fade:!0,lazyLoad:"progressive",responsive:[{breakpoint:768,settings:{verticalSwiping:!1}}]})}),$("#projects-sliders").show("slide",{direction:"down"},500)),d?($(".mobile-close-button").show(),$("#header-mobile .container").removeClass("gradient")):hideAdditionnal(),$("#"+e).addClass("active"),$("#additional, #header-mobile, #header-desktop").addClass("blending"),d||$("#"+e+" .presentation-container .categories").html($("#"+e+" .presentation-container .categories").html().replace(/, /g,"<br>")),$("#"+e+" .presentation-container .left").height()<$("#"+e+" .presentation-container .right .overflower p").height()&&$("#"+e+" .presentation-container .right .toggle-more").show(),$("#"+e+" .presentation-container .right .toggle-more").on("click",function(){"Fermer"==$(this).html()||"Close"==$(this).html()||"닫기"==$(this).html()||"閉じる"==$(this).html()?("/kor"==l?$("#"+e+" .presentation-container .right .toggle-more").html("+ 이 프로젝트에 대한 정보"):"/jp"==l?$("#"+e+" .presentation-container .right .toggle-more").html("このプロジェクトの詳細について"):"/en"==l?$("#"+e+" .presentation-container .right .toggle-more").html("+ informations about this project"):$("#"+e+" .presentation-container .right .toggle-more").html("+ d'informations sur ce projet"),$("#"+e+" .presentation-container .right .overflower").removeClass("longer"),$("#"+e+" .presentation-container .right .overflower-container").removeClass("normal-scroll"),$("#"+e+" .presentation-container .right .overflower").css("max-height",120)):("/kor"==l?$("#"+e+" .presentation-container .right .toggle-more").html("닫기"):"/jp"==l?$("#"+e+" .presentation-container .right .toggle-more").html("閉じる"):"/en"==l?$("#"+e+" .presentation-container .right .toggle-more").html("Close"):$("#"+e+" .presentation-container .right .toggle-more").html("Fermer"),$("#"+e+" .presentation-container .right .overflower p").height()>100?($("#"+e+" .presentation-container .right .overflower").css("max-height",248),$("#"+e+" .presentation-container .overflower-container .overflower").addClass("longer"),$("#"+e+" .presentation-container .right .overflower-container").addClass("normal-scroll")):$("#"+e+" .presentation-container .right .overflower").css("max-height",$("#"+e+" .presentation-container .right .overflower p").height()+20))})}})}}),$(".close-button, .mobile-close-button").on("click",function(){d&&a.destroy(),$("#projects-sliders").fadeOut("fast",function(){$(".slick-slider.active video").trigger("pause"),$(".slick-slider.active").hide().removeClass("active")}),d||showAdditionnal(),$("#additional, #header-mobile, #header-desktop").removeClass("blending"),$(".mobile-close-button").hide(),$("#section-home").hasClass("active")||setTimeout(function(){$("#header-desktop .container, #header-mobile .container").addClass("gradient")},500)}),$("#projects-sliders").on("click",".right-cover, .mobile-arrow-right",function(){$(".slick-slider.active").slick("slickNext"),$(".slick-slider.active .slick-current video").length>0?($(".slick-slider.active .slick-current video").get(0).play(),$(".slick-slider.active .slick-current video").on("timeupdate",function(){var e=$(".slick-slider.active .slick-current"),i=$(".slick-slider.active .slick-current video");if(i[0]){e.find(".video-current").text(formatTime(i[0].currentTime)),e.find(".video-duration").text(formatTime(i[0].duration));var t=i[0].currentTime/i[0].duration;e.find(".video-progress").width(100*t+"%")}})):$(".slick-slider.active video").trigger("pause")}),$("#projects-sliders").on("click",".left-cover, .mobile-arrow-left",function(){$(".slick-slider.active").slick("slickPrev"),$(".slick-slider.active .slick-current video").length>0?($(".slick-slider.active .slick-current video").get(0).play(),$(".slick-slider.active .slick-current video").on("timeupdate",function(){var e=$(".slick-slider.active .slick-current"),i=$(".slick-slider.active .slick-current video");if(i[0]){e.find(".video-current").text(formatTime(i[0].currentTime)),e.find(".video-duration").text(formatTime(i[0].duration));var t=i[0].currentTime/i[0].duration;e.find(".video-progress").width(100*t+"%")}})):$(".slick-slider.active video").trigger("pause")}),d||($(".presentation-container").hover(function(){showAdditionnal()},function(){setTimeout(function(){$(".slick-slider.active").length>0&&hideAdditionnal()},3e3)}),$(document).on("mouseenter",".center-cover",function(){showAdditionnal()}),$(document).on("mouseleave",".center-cover",function(){setTimeout(function(){$(".slick-slider.active").length>0&&hideAdditionnal()},3e3)})),$(document).on("click",".custom-controls .play-pause",function(){var e=$(this),i=$(".slick-slider.active .slick-current video")[0];i.paused?(i.play(),e.addClass("pause"),e.text("Pause")):(i.pause(),e.removeClass("pause"),e.text("Play"))}),$(document).on("click",".custom-controls .video-scrubber-container",function(){var e=$(".slick-slider.active .slick-current"),i=$(".slick-slider.active .slick-current video"),t=event.pageX-e.find(".video-scrubber-container").offset().left,o=i[0].duration*t/e.find(".video-scrubber-container").width();i[0].currentTime=o})});var showAdditionnal=function(){$(".slick-slider.active").length>0?($("#header-desktop .container, #header-mobile .container").removeClass("gradient"),$("#additional > *, #header-desktop").fadeIn("fast")):($("#section-home").hasClass("active")||setTimeout(function(){$("#header-desktop .container, #header-mobile .container").addClass("gradient")},500),$("#additional > *, #header-desktop").fadeIn("fast"))},hideAdditionnal=function(){$("#additional > *, #header-desktop").fadeOut("fast")};window.onresize=function(){window.innerWidth<768?($("html").addClass("mobile"),isMobile=!0):($("html").removeClass("mobile"),isMobile=!1);var e=$(".year-section").offset().left;containerProjectOffset=$("#section-projects .container").offset().top-$("#section-projects").offset().top,isMobile?$(".year-fixed").css("left","5%"):$(".year-fixed").css("left",e-58),$(".year-fixed").css("margin-top",containerProjectOffset-32)};
